import{u as Y,m as H,a as K,b as Q,o as A,c as q,d as x,e as J}from"./chunk-D6TGLPxF.js";import{d as u,o as $,a as E,X as S,b9 as ee,O as L,D as P,K as te,aV as M,g as w,h as re,m as O,i as R,F as C,$ as D,c as m,az as ae,I as oe,ba as ne,a0 as se,f as d,b as p,p as le,w as c,W as j,Y as z,Z,bb as ie,bc as pe,j as ce}from"./chunk-Dr2pd04r.js";import{n as de}from"./chunk-Dd5vnLK-.js";const ue={disabled:{type:Boolean,default:!1}};var y=u({name:"VmTeleportToContainer",props:ue,setup(){return{container:Y().getContainer()}}});function me(e,r,t,a,o,s){return $(),E(ee,{to:e.container,disabled:e.disabled},[S(e.$slots,"default")],8,["to","disabled"])}y.render=me;y.__file="teleport-to-container/src/index.vue";y.install=e=>{e.component(y.name,y)};const ye={defaultOptions:{type:Object,default:()=>({})},minZoom:Number,maxZoom:Number},fe={load:e=>e};var ve=Object.defineProperty,F=Object.getOwnPropertySymbols,$e=Object.prototype.hasOwnProperty,_e=Object.prototype.propertyIsEnumerable,U=(e,r,t)=>r in e?ve(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,be=(e,r)=>{for(var t in r||(r={}))$e.call(r,t)&&U(e,t,r[t]);if(F)for(var t of F(r))_e.call(r,t)&&U(e,t,r[t]);return e},_=u({name:"VmMap",inheritAttrs:!1,emits:fe,props:ye,setup(e,{emit:r}){const t=L(),a=L(),o=L();return P("vmMap",a),P("vmStyle",o),te(()=>{a.value=new H.Map(be({container:t.value,center:[120,30],zoom:9,projection:{name:"globe"},style:{version:8,layers:[],sources:{}}},e.defaultOptions)),M(()=>{a.value.setMinZoom(e.minZoom)}),M(()=>{a.value.setMaxZoom(e.maxZoom)}),a.value.once("style.load",()=>{o.value=a.value.getStyle()}),r("load",{map:a.value})}),{mapNode:t,map:a,style:o}}});function ge(e,r,t,a,o,s){return $(),w(C,null,[re("div",O({class:"vm-map",ref:"mapNode"},e.$attrs),null,16),e.style?S(e.$slots,"default",{key:0}):R("v-if",!0)],64)}_.render=ge;_.__file="map/src/index.vue";_.install=e=>{e.component(_.name,_)};const B={maxzoom:Number,minzoom:Number},Ve=D(B),Pe={};var G=Object.freeze({__proto__:null,props:B,createBindProps:Ve,emits:Pe}),b=u({props:B,setup(e){const r=K();return Q(r,e),()=>null}});b.__file="raster-layer-set/src/index.vue";b.install=e=>{e.component(b.name,b)};const I={id:{type:String,default:void 0},before:String},Se=D(I),N={load:e=>e,change:e=>e},Te=se(N);var h=Object.freeze({__proto__:null,props:I,createBindProps:Se,emits:N,createOnEmits:Te}),f=u({name:"VmRasterAddLayer",emits:N,props:I,setup(e,{emit:r}){const t=Y(),a=de(x),o=m(()=>{var l;return(l=e.id)!=null?l:a.value.id}),s=L(),n=m(()=>({id:o.value,type:"raster",source:a.value.id}));return A(t,n.value,e.before),P("vmLayer",s),P("vmRasterLayer",s),s.value=t.getLayer(o.value),r("load",{map:t,source:a.value,layer:s.value}),ae(()=>n.value,async(l,i)=>{await oe(),i?q(t,i.id,l,e.before):A(t,n.value,e.before),r("change",{map:t,source:a.value,layer:t.getLayer(o.value)}),s.value=t.getLayer(o.value)}),ne(()=>{t.getLayer(o.value)&&t.removeLayer(o.value)}),{layer:s}}});function Le(e,r,t,a,o,s){return e.layer?S(e.$slots,"default",{key:0,layer:e.layer}):R("v-if",!0)}f.render=Le;f.__file="raster-add-layer/src/index.vue";f.install=e=>{e.component(f.name,f)};const Oe={type:{type:String,default:"img_w"},token:{type:String,default:"f0175927031c1e12cb804b0c3b8cce4d"},id:String},he={};var v=u({name:"VmTdtSource",components:{VmAddSource:J},emits:he,props:Oe,setup(e,{emit:r}){const t=["t0","t1","t2","t3","t4","t5","t6","t7"],a=m(()=>{const n=e.type.split("_"),l=n[0],i=n[1];return{baseLayer:l,typeSR:i}}),o=m(()=>e.id||`tdt-source__${e.type}`),s=m(()=>({id:o.value,type:"raster",tileSize:256,tiles:t.map(n=>`https://${n}.tianditu.gov.cn/${e.type}/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=${a.value.baseLayer}&STYLE=default&TILEMATRIXSET=${a.value.typeSR}&FORMAT=tiles&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&tk=${e.token}`)}));return P("vmSource",s),{source:s}}});function ke(e,r,t,a,o,s){const n=d("VmAddSource");return $(),w(C,null,[p(n),S(e.$slots,"default",{source:e.source})],64)}v.render=ke;v.__file="tdt-source/src/index.vue";v.install=e=>{e.component(v.name,v)};var Ee=Object.defineProperty,W=Object.getOwnPropertySymbols,we=Object.prototype.hasOwnProperty,Re=Object.prototype.propertyIsEnumerable,X=(e,r,t)=>r in e?Ee(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,k=(e,r)=>{for(var t in r||(r={}))we.call(r,t)&&X(e,t,r[t]);if(W)for(var t of W(r))Re.call(r,t)&&X(e,t,r[t]);return e};const Ce=k(k({idPrefix:{type:String,default:"tdt"},type:{type:String,default:"img_w"},token:{type:String,default:"f0175927031c1e12cb804b0c3b8cce4d"},anno:{type:Boolean,default:!0}},le(h.props,{excludes:["id"]})),G.props),Be=k({},h.emits);var g=u({name:"VmTdtLayers",components:{VmTdtSource:v,VmRasterAddLayer:f,VmRasterLayerSet:b},emits:Be,props:Ce,setup(e,{emit:r}){const t=m(()=>{const n=e.type.split("_"),l=n[0],i=n[1];return`c${l[0]}a_${i}`}),a=G.createBindProps(e),o=h.createBindProps(e),s=h.createOnEmits(r);return{addBindProps:o,addOnEmits:s,annoType:t,rasterProps:a}}});function Ie(e,r,t,a,o,s){const n=d("VmRasterLayerSet"),l=d("VmRasterAddLayer"),i=d("VmTdtSource");return $(),w(C,null,[p(i,{token:e.token,type:e.type,id:e.idPrefix&&`${e.idPrefix}__${e.type}`},{default:c(()=>[p(l,O(e.addBindProps,j(e.addOnEmits)),{default:c(()=>[p(n,z(Z(e.rasterProps)),null,16)]),_:1},16)]),_:1},8,["token","type","id"]),e.anno?($(),E(i,{key:0,token:e.token,type:e.annoType,id:e.idPrefix&&`${e.idPrefix}__${e.annoType}`},{default:c(()=>[p(l,O(e.addBindProps,j(e.addOnEmits)),{default:c(()=>[p(n,z(Z(e.rasterProps)),null,16)]),_:1},16)]),_:1},8,["token","type","id"])):R("v-if",!0)],64)}g.render=Ie;g.__file="tdt-layers/src/index.vue";g.install=e=>{e.component(g.name,g)};const Ne={modelValue:{type:Boolean,default:!1}},Ae={"update:modelValue":e=>typeof e=="boolean"};var V=u({name:"VmToggleUi",inheritAttrs:!1,components:{VkCheckLogicProvider:ie,VkCheckLogic:pe,VmTeleportToContainer:y},emits:Ae,props:Ne});const Me=ce("i");function je(e,r,t,a,o,s){const n=d("VkCheckLogic"),l=d("VkCheckLogicProvider"),i=d("VmTeleportToContainer");return $(),E(i,null,{default:c(()=>[p(l,{modelValue:e.modelValue,"onUpdate:modelValue":r[0]||(r[0]=T=>e.$emit("update:modelValue",!!T))},{default:c(()=>[p(n,O({class:"vm-toggle-ui"},e.$attrs,{name:!0}),{default:c(({isActive:T})=>[S(e.$slots,"default",{isActive:T},()=>[Me])]),_:3},16)]),_:3},8,["modelValue"])]),_:3})}V.render=je;V.__file="toggle-ui/src/index.vue";V.install=e=>{e.component(V.name,V)};export{_ as a,g as s};
