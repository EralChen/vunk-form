import{R as nt}from"./chunk-lpDqIA_h.js";import{b4 as ot,g as M,as as rt,N as st,b5 as ct,X as E,b6 as V,b7 as at,b8 as ut,b9 as ft,ba as it,S as lt,bb as ht,bc as dt,c as mt}from"./chunk-C7ZeX_9O.js";import{R as vt}from"./chunk-zKPkODU6.js";/*!
 * pinia v2.2.6
 * (c) 2024 Eduardo San Martin Morote
 * @license MIT
 */let z;const U=t=>z=t,bt=Symbol();function F(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var I;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(I||(I={}));const H=()=>{};function B(t,n,o,e=H){t.push(n);const r=()=>{const u=t.indexOf(n);u>-1&&(t.splice(u,1),e())};return!o&&ft()&&it(r),r}function P(t,...n){t.slice().forEach(o=>{o(...n)})}const yt=t=>t(),D=Symbol(),_=Symbol();function L(t,n){t instanceof Map&&n instanceof Map?n.forEach((o,e)=>t.set(e,o)):t instanceof Set&&n instanceof Set&&n.forEach(t.add,t);for(const o in n){if(!n.hasOwnProperty(o))continue;const e=n[o],r=t[o];F(r)&&F(e)&&t.hasOwnProperty(o)&&!E(e)&&!V(e)?t[o]=L(r,e):t[o]=e}return t}const pt=Symbol();function St(t){return!F(t)||!t.hasOwnProperty(pt)}const{assign:b}=Object;function gt(t){return!!(E(t)&&t.effect)}function wt(t,n,o,e){const{state:r,actions:u,getters:s}=n,f=o.state.value[t];let i;function m(){f||(o.state.value[t]=r?r():{});const d=ht(o.state.value[t]);return b(d,u,Object.keys(s||{}).reduce((y,p)=>(y[p]=dt(mt(()=>{U(o);const S=o._s.get(t);return s[p].call(S,S)})),y),{}))}return i=Z(t,m,n,o,e,!0),i}function Z(t,n,o={},e,r,u){let s;const f=b({actions:{}},o),i={deep:!0};let m,d,y=[],p=[],S;const g=e.state.value[t];!u&&!g&&(e.state.value[t]={}),M({});let A;function W(a){let c;m=d=!1,typeof a=="function"?(a(e.state.value[t]),c={type:I.patchFunction,storeId:t,events:S}):(L(e.state.value[t],a),c={type:I.patchObject,payload:a,storeId:t,events:S});const l=A=Symbol();lt().then(()=>{A===l&&(m=!0)}),d=!0,P(y,c,e.state.value[t])}const N=u?function(){const{state:c}=o,l=c?c():{};this.$patch(w=>{b(w,l)})}:H;function Q(){s.stop(),y=[],p=[],e._s.delete(t)}const K=(a,c="")=>{if(D in a)return a[_]=c,a;const l=function(){U(e);const w=Array.from(arguments),C=[],O=[];function tt(h){C.push(h)}function et(h){O.push(h)}P(p,{args:w,name:l[_],store:v,after:tt,onError:et});let j;try{j=a.apply(this&&this.$id===t?this:v,w)}catch(h){throw P(O,h),h}return j instanceof Promise?j.then(h=>(P(C,h),h)).catch(h=>(P(O,h),Promise.reject(h))):(P(C,j),j)};return l[D]=!0,l[_]=c,l},T={_p:e,$id:t,$onAction:B.bind(null,p),$patch:W,$reset:N,$subscribe(a,c={}){const l=B(y,a,c.detached,()=>w()),w=s.run(()=>rt(()=>e.state.value[t],C=>{(c.flush==="sync"?d:m)&&a({storeId:t,type:I.direct,events:S},C)},b({},i,c)));return l},$dispose:Q},v=st(T);e._s.set(t,v);const R=(e._a&&e._a.runWithContext||yt)(()=>e._e.run(()=>(s=ct()).run(()=>n({action:K}))));for(const a in R){const c=R[a];if(E(c)&&!gt(c)||V(c))u||(g&&St(c)&&(E(c)?c.value=g[a]:L(c,g[a])),e.state.value[t][a]=c);else if(typeof c=="function"){const l=K(c,a);R[a]=l,f.actions[a]=c}}return b(v,R),b(at(v),R),Object.defineProperty(v,"$state",{get:()=>e.state.value[t],set:a=>{W(c=>{b(c,a)})}}),e._p.forEach(a=>{b(v,s.run(()=>a({store:v,app:e._a,pinia:e,options:f})))}),g&&u&&o.hydrate&&o.hydrate(v.$state,g),m=!0,d=!0,v}/*! #__NO_SIDE_EFFECTS__ */function Pt(t,n,o){let e,r;const u=typeof n=="function";e=t,r=u?o:n;function s(f,i){const m=ut();return f=f||(m?ot(bt,null):null),f&&U(f),f=z,f._s.has(e)||(u?Z(e,n,r,f):wt(e,r,f)),f._s.get(e)}return s.$id=e,s}/*! js-cookie v3.0.5 | MIT */function x(t){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var e in o)t[e]=o[e]}return t}var Rt={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function k(t,n){function o(r,u,s){if(!(typeof document>"u")){s=x({},n,s),typeof s.expires=="number"&&(s.expires=new Date(Date.now()+s.expires*864e5)),s.expires&&(s.expires=s.expires.toUTCString()),r=encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var f="";for(var i in s)s[i]&&(f+="; "+i,s[i]!==!0&&(f+="="+s[i].split(";")[0]));return document.cookie=r+"="+t.write(u,r)+f}}function e(r){if(!(typeof document>"u"||arguments.length&&!r)){for(var u=document.cookie?document.cookie.split("; "):[],s={},f=0;f<u.length;f++){var i=u[f].split("="),m=i.slice(1).join("=");try{var d=decodeURIComponent(i[0]);if(s[d]=t.read(m,d),r===d)break}catch{}}return r?s[r]:s}}return Object.create({set:o,get:e,remove:function(r,u){o(r,"",x({},u,{expires:-1}))},withAttributes:function(r){return k(this.converter,x({},this.attributes,r))},withConverter:function(r){return k(x({},this.converter,r),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}var $=k(Rt,{path:"/"});const J="VUNK_SKZZ_REST_PLATFORM";function Ct(){return $.get(J)||""}function jt(t){return $.set(J,t)}const It=new vt({baseURL:"/data"}),xt=async(...t)=>await It.request(...t),X=async()=>xt({method:"GET",url:"/platforms.json",cache:{id:"platforms"}}).then(t=>(t.forEach(n=>{n.code==="default"&&(n.url=q.baseURL)}),t)),Et=async t=>X().then(n=>n.find(o=>o.code===t)).then(n=>(n&&Y().setPlatformInfo(n),n)),Ot=async()=>X().then(t=>t[0]),Y=Pt("platform",()=>{const t=M({}),n=r=>{t.value=r,jt(r.code)},o=async r=>{r?await Et(r).then(u=>{u&&n(u)}):await Ot().then(u=>{n(u)})};return{platformInfo:t,setPlatformInfoByCode:o,getPlatformInfo:async()=>(t.value.code||await o(Ct()||""),t.value),setPlatformInfo:n}});var G=(t=>(t.search="search",t.increase="increase",t.modify="modify",t.remove="remove",t))(G||{});const q=new nt({baseURL:"",requestThen:t=>(t.code===401&&window.location.reload(),t)});function _t(t){return async(...n)=>{let o;try{o=Y()}catch{console.warn("usePlatformStore  is not defined")}const e=await o?.getPlatformInfo();return e?.url&&(q.baseURL=e.url),t(...n)}}const Ft=async(...t)=>{const[n]=t;if(n.url==="/core/busi/query"){const e=n.data;e.buttonId||(e.buttonId=G.search)}return await q.request(...t)},At=_t(Ft);export{q as a,At as r,_t as w};
