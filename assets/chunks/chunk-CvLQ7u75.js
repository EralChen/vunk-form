import{N as E}from"./chunk-B6ckpD1m.js";import{am as _,an as g,p as h,d as w,I as b,ao as v,ap as R,c as F,aq as C,W as D,l as n,o as I,a as $,w as c,b as m,n as P,F as B,r as T,ar as O,m as j,a2 as q}from"./chunk-Dw53j9Qa.js";import{_ as L,g as N}from"./chunk-DVj1gyv_.js";import{o as A,q as H}from"./chunk-BZT5mSTd.js";import{g as W}from"./chunk-DyvYxXn8.js";import{V as z}from"./chunk-Bi1EyO-G.js";import{V as G}from"./chunk-CG18FGfN.js";import{_ as J}from"./chunk-DrIIi3Cp.js";import{_ as K}from"./chunk-bcUd3NzG.js";const M={..._,data:{type:Object,default:()=>({})},formItems:{type:Array,default:()=>[]},readonly:{type:Boolean},elRef:{type:Function,default:()=>E},layout:{type:Boolean,default:!1},rowSource:{type:Object,default:()=>({})},colSource:{type:Object,default:()=>({})},inheritTemplates:{type:Boolean,default:!1}},Q={...g,setData:e=>e,validate:null,submit:null},U=e=>24-e.templateSlots.reduce((o,a)=>{if(!a.span)throw new Error("ElColSource span is required");return o+a.span},0),X=(e,o={})=>{const a=e.span??o.span;if(a==null)throw new Error("genColItem ElColSource span is required");return{...o,templateType:"ElCol",span:a,templateSlots:[h(e,{excludes:["span"]})]}},Y=(e,o={})=>({...o,templateType:"ElRow",templateSlots:e?[e]:[]}),Z=w({name:"VkfForm",components:{VkfTemplateInstancesProvider:J,VkfRendererData:K,ElForm:b,VkfFormItemRenderer:L,VkfTemplatesDefault:z,VkfTemplatesLayout:G},props:M,emits:Q,setup(e,{emit:o}){const a=A(e,["model"]),d=H(o),f=v(),V=C();R("vkfFormVm",V),R("elFormRef",f);const p=t=>{f.value=t,e.elRef(t)},u=F(()=>e.layout?e.formItems.reduce((t,r)=>{const s=t.findLast(S=>S.templateType==="ElRow"),l=r.span??e.colSource.span;if(!l)return t.push(r),t;if(Reflect.has(r,"templateIf")&&!N(r.templateIf)(e.data))return t;const y=X(r,e.colSource);return!s||U(s)<l?t.push(Y(y,e.rowSource)):s.templateSlots.push(y),t},[]):e.formItems);return{formProps:a,formEmits:d,getValue:W,getRef:p,computed:F,rendererSource:u,handleSubmit:t=>{t.preventDefault(),o("submit",t)}}}});function x(e,o,a,d,f,V){const p=n("VkfTemplatesDefault"),u=n("VkfTemplatesLayout"),k=n("VkfFormItemRenderer"),t=n("VkfRendererData"),r=n("VkfTemplateInstancesProvider"),s=n("ElForm");return I(),$(s,j(e.formProps,{ref:e.getRef,class:{"is-readonly":e.readonly},model:e.model||e.data},q(e.formEmits),{onSubmit:e.handleSubmit}),{default:c(()=>[m(r,{"inherit-templates":e.inheritTemplates},{default:c(()=>[e.inheritTemplates?O("",!0):(I(),P(B,{key:0},[m(p),m(u),T(e.$slots,"rendererTemplate")],64)),m(t,{data:e.data,onSetData:o[0]||(o[0]=l=>e.$emit("setData",l))},{default:c(()=>[m(k,{source:e.rendererSource},null,8,["source"])]),_:1},8,["data"])]),_:3},8,["inherit-templates"]),T(e.$slots,"default")]),_:3},16,["class","model","onSubmit"])}const i=D(Z,[["render",x]]);i.install=e=>{e.component(i.name,i)};export{i as V};
