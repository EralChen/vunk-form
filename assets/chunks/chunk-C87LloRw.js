import{$ as T,p as G,a0 as I,d as v,v as R,ad as O,aV as b,bx as S,M as B,f as t,o as V,a as w,w as m,b as n,c as M,g as h,af as j,ag as N,m as g,W as _,X as C,i as F,F as A,by as W,Y,Z as z}from"./chunk-BAtEUBju.js";import{p as D,e as H,V as J,c as U,a as X}from"./chunk-MvqiMl48.js";import{g as $,E as Z,s as q,u as K,h as Q}from"./chunk-DBfSALNd.js";import{s as x,a as ee}from"./chunk-C6m58sYP.js";const L={...D,...$.props,modelValue:{type:Object,default:()=>Z},editStyles:{type:Array,default:()=>[]},editTypes:{type:[Array,String],default:"polygon"},paint:{type:Object,default:void 0},type:{type:String,default:void 0},custom:{type:Boolean,default:!1},showMap:{type:Boolean,default:!1}},oe=T(L),P={...G($.emits,{excludes:["click"]}),...H,layerChange:e=>e,"update:modelValue":e=>e,layerClick:e=>e},te=I(P),ne=v({components:{ElButton:R,ElIcon:O,ElButtonGroup:b,MapLocation:S},emits:{mapLocationClick:null}});function ae(e,o,l,c,f,y){const p=t("MapLocation"),a=t("ElIcon"),i=t("ElButton"),s=t("ElButtonGroup");return V(),w(s,null,{default:m(()=>[n(i,{class:"vk-geoinput-read-map-location-x",onClick:o[0]||(o[0]=d=>e.$emit("mapLocationClick"))},{default:m(()=>[n(a,{color:"var(--el-color-primary)"},{default:m(()=>[n(p)]),_:1})]),_:1})]),_:1})}const se=B(ne,[["render",ae]]),pe=v({name:"VkfGeoinputReadCore",components:{VkfInput:J,VmGeojsonLayer:q,ElIcon:O,MapLocation:S},emits:P,props:L,setup(e,{emit:o}){const l=U(e,["inputSlots","readonly","modelValue","type","id"]),c=X(o,["update:modelValue"]),f=$.createBindProps(e,["data","type","paint"]),y=$.createOnEmits(o,["change"]),p=K(),a=M(()=>{if(e.type)return e.type;const r=e.modelValue?.features[0]?.geometry?.type;return{LineString:"line",Polygon:"fill",MultiLineString:"line",MultiPolygon:"fill"}[r]||"fill"}),i=M(()=>e.editStyles.reduce((r,u)=>{if(a.value==="fill"&&(u.id.includes("polygon-fill-inactive")||u.id.includes("polygon-stroke-inactive"))){const k=u.paint;r={...r,...k}}if(a.value==="line"&&u.id.includes("line-inactive")){const k=u.paint;r={...r,...k}}return r},{})),s=()=>{Q(p,e.modelValue,{duration:1500})};return{mapFit:s,inputBindProps:l,inputOnEmits:c,mapBindProps:f,mapOnEmits:y,append:()=>n(se,{onMapLocationClick:s},null),geoType:a,paintFromEditStyles:i}}});function ie(e,o,l,c,f,y){const p=t("VkfInput"),a=t("MapLocation"),i=t("ElIcon"),s=t("VmGeojsonLayer");return V(),h(A,null,[j(n(p,g({readonly:!0,modelValue:JSON.stringify(e.modelValue)},e.inputBindProps,_(e.inputOnEmits),{inputSlots:{append:e.append}}),null,16,["modelValue","inputSlots"]),[[N,!e.custom]]),e.custom?C(e.$slots,"default",{key:0,mapFit:e.mapFit},()=>[n(i,{color:"var(--el-color-primary)",onClick:e.mapFit},{default:m(()=>[n(a)]),_:1},8,["onClick"])]):F("",!0),n(s,g(e.mapBindProps,{data:e.modelValue,type:e.geoType,paint:e.paint||e.paintFromEditStyles},_(e.mapOnEmits),{onChange:o[0]||(o[0]=d=>e.$emit("layerChange",d)),onClick:o[1]||(o[1]=d=>e.$emit("layerClick",d))}),null,16,["data","type","paint"])],64)}const re=B(pe,[["render",ie]]),le=v({name:"VkfGeoinputRead",components:{CoreVue:re,VkWrapper:W,VmTdtLayers:x},props:L,emits:P,setup(e,{emit:o}){const l=oe(e),c=te(o);return{VmMap:ee,coreBindProps:l,coreOnEmits:c}}}),ce={class:"vk-geoinput-read-x"};function ue(e,o,l,c,f,y){const p=t("VmTdtLayers"),a=t("CoreVue"),i=t("VkWrapper");return V(),h("div",ce,[n(i,{is:e.VmMap,show:e.showMap,className:"vk-geoinput-read-map"},{default:m(()=>[C(e.$slots,"map",{},()=>[e.showMap?(V(),w(p,{key:0,type:"vec_w"})):F("",!0)]),n(a,g(e.coreBindProps,_(e.coreOnEmits)),{default:m(s=>[C(e.$slots,"default",Y(z(s)))]),_:3},16)]),_:3},8,["is","show"])])}const E=B(le,[["render",ue]]);E.install=e=>{e.component(E.name,E)};export{E as V,te as a,oe as c,P as e,L as p};
