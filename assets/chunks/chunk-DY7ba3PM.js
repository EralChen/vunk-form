import{p as M,t as b,v as U,V as j,c as w,w as C,x as F,u as I}from"./chunk-CrV41Nja.js";import{d as $,j as K,k as A,c as E,at as N,e as O,au as S,N as R,B as _,R as z,g as y,o as d,a as f,w as V,m as B,Y as D,a1 as H,h as J,F as L,M as P,a2 as T,an as Y,r as q,I as G,J as Q}from"./chunk-9eDQGDPh.js";const W={...M,...b,options:{type:Array,default:()=>[]},selectSlots:{type:Object,default:void 0},optionsUrl:{type:String,default:""},defaultModelValue:null,stringify:{type:Boolean,default:!1}},X={...U},Z=$({name:"VkfSelect",components:{VkfFormItem:j,ElSelect:K,ElOption:A},props:W,emits:X,setup(e,{emit:o}){const k=w(e),i=C(e,["disabled","modelValue"]),h=F(o,["update:modelValue"]),g=I(e),c=E({get:()=>e.multiple&&e.stringify&&typeof e.modelValue=="string"?e.modelValue?e.modelValue.split(","):[]:e.modelValue??e.defaultModelValue,set:t=>{if(e.multiple&&e.stringify&&Array.isArray(t)){const a=t.reduce((u,l)=>(typeof l=="string"?u.push(l):N(l)&&l[e.valueKey]!==void 0&&u.push(l[e.valueKey]),u),[]).join(",");o("update:modelValue",a);return}o("update:modelValue",t)}});e.modelValue===void 0&&e.defaultModelValue&&(c.value,e.defaultModelValue);const n=O([]),m=t=>{t?fetch(t).then(a=>a.json()).then(a=>{n.value=a}):n.value=[]};e.optionsUrl&&m(e.optionsUrl),S(()=>e.optionsUrl,t=>{o("update:modelValue",void 0),m(t)});const s=t=>_(t.value)?t.value[i.value.valueKey]:t.value,p=E(()=>(n.value.length?n.value:e.options).reduce((a,u)=>{const l=s(u);return!l&&l!==0&&l!==!1||a.push({...u,key:l}),a},[])),r=O(!0);return S(()=>i.value.multiple,()=>{o("update:modelValue",void 0),r.value=!1,R(()=>{r.value=!0})}),{formItemBindProps:k,selectBindProps:i,selectOnEmits:h,selectOptions:p,reshow:r,readonly:g,theModelValue:c}}});function x(e,o,k,i,h,g){const c=y("ElOption"),n=y("ElSelect"),m=y("VkfFormItem");return d(),f(m,G(Q(e.formItemBindProps)),{default:V(()=>[e.reshow?(d(),f(n,B({key:0},e.selectBindProps,{modelValue:e.theModelValue,"onUpdate:modelValue":o[0]||(o[0]=s=>e.theModelValue=s),disabled:e.readonly||e.disabled,class:{"is-readonly":e.readonly}},D(e.selectOnEmits)),H({default:V(()=>[(d(!0),J(L,null,P(e.selectOptions,s=>(d(),f(c,B({ref_for:!0},s,{key:s.key}),null,16))),128))]),_:2},[P(e.selectSlots,(s,p)=>({name:p,fn:V(r=>[(d(),f(T(s?.(r))))])}))]),1040,["modelValue","disabled","class"])):Y("",!0),q(e.$slots,"default")]),_:3},16)}const v=z(Z,[["render",x]]);v.install=e=>{e.component(v.name,v)};export{v as V};
