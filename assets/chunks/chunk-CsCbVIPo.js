import{bz as v,aj as f,b5 as D,c as V,k as C,d as b,h as E,S as U,bA as w,ak as K}from"./chunk-C7hCAWl2.js";import{d as g,g as P}from"./chunk-DyvYxXn8.js";const H=()=>{const e=v({});return f("vkTemplateInstances",e),e},S=()=>D("vkTemplateInstances",null),J=(e,n)=>{const a=V(()=>e.data),p={data:a,emitSetData:s=>{n.emit("setData",{intoUndefined:g,...s})},getDataValue:s=>P(a.value,s,g,!0)};return f("vkRendererData",p),p},$=()=>D("vkRendererData",{}),q={source:{type:Array,default:()=>[]},templateInstances:{type:Object,default:void 0},k:{type:Array,default:()=>[]}},L=(e,n={})=>{let a="";a+=n.prefix||"";for(const r in e)e[r].forEach(o=>{a+=o.message+";"});a+=n.suffix||"",C({type:"warning",message:a})},z=e=>{if(typeof e=="boolean"){const n=e;return()=>n}else{if(typeof e=="string")return new Function("data",e);if(typeof e=="function")return e}return()=>!0},h=b({name:"VkfFormItemRenderer",props:q,setup(e,n){const a=S(),{emitSetData:r,data:o,getDataValue:p}=$(),s=e.templateInstances??a??v({});f("vkTemplateInstances",s);const F=l=>E(h,{templateInstances:s,...l}),R=(l,j=[])=>l.reduce((u,t,A)=>{t.key=t.key??(Array.isArray(t.prop)?t.prop.join():t.prop);const y=[...e.k,...j,A],_=()=>{U(()=>{t.templateType&&!s[t.templateType]&&console.warn(t.templateType,"templateType不存在将跳过")})};if(t.templateType&&s[t.templateType]){const T=z(t.templateIf);if(!(o?T(o.value):!0))return u;const m={...t};Reflect.deleteProperty(m,"templateType"),Reflect.deleteProperty(m,"templateIf");const x=y.join(",")+"-"+t.templateType+"-"+(t.prop||"no-prop"),I=V({get:()=>t.prop&&p?.(t.prop),set:c=>r?.({k:t.prop,v:c})}),k=s[t.templateType].slots.default?.({data:m,raw:t,props:m,k:y,key:x,value:I.value,input:c=>I.value=c,templateIf:T,Renderer:F,getDataValue:p,emitSetData:r});k&&u.push(k)}else _();return u},[]);return()=>[n.slots.default?.(),R(e.source)]}}),i=h;i.install=e=>{e.component(i.name,i)};const M={type:{type:String,required:!0,default:""}},d=b({name:"VkfFormItemRendererTemplate",props:M,setup(e){const n=S();if(!n)throw new Error;const a=K(),r=n[e.type];return a&&n&&(n[e.type]=a),w(()=>{n[e.type]=r}),()=>null}});d.install=e=>{e.component(d.name,d)};export{i as _,d as a,J as b,z as g,H as i,S as u,L as v};
