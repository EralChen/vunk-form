import{p as g,V as P,b as $,u as b}from"./chunk-CSFIeiLH.js";import{e as D,g as R}from"./chunk-DyvYxXn8.js";import{d as B,aX as S,H as N,aY as w,c as A,aN as C,W as q,l as r,o as l,e as u,w as n,al as I,f as s,m as M,n as F,G as V,t as G,F as H,R as L,a5 as U,q as W,g as X,u as T}from"./chunk-C7hCAWl2.js";import{V as Y}from"./chunk-vjpQnoJ0.js";import{_ as j}from"./chunk-BV6Aturx.js";import{_ as z}from"./chunk-CsCbVIPo.js";import{_ as J}from"./chunk-BNL6fRHT.js";import{V as K}from"./chunk-Cn2Z79B6.js";import"./chunk-B2eZl6J6.js";import"./chunk-CHVJJ-_P.js";import"./chunk-fziB7CNt.js";import"./chunk-B8uROixY.js";import"./chunk-C4hgKrpu.js";import"./chunk-88KJLNH2.js";import"./chunk-2IrP2epe.js";import"./chunk-C_pCzuuC.js";import"./chunk-DVEoTv95.js";import"./chunk-Cy-QB2Eg.js";import"./chunk-C40iBw0I.js";import"./chunk-DYP5Jm2f.js";import"./chunk-rZ9kANyF.js";import"./chunk-fEI7Cr-O.js";import"./chunk-D5iTdERt.js";import"./chunk-zKPkODU6.js";const O={...g,formItems:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]},readonly:{type:Boolean,default:void 0},splicable:{type:Boolean,default:!0},inheritTemplates:{type:Boolean,default:!1}},Q={},Z=B({name:"VkfCardInputCollection",components:{VkfFormItem:P,ElCard:S,ElButton:N,ElEmpty:w,VkfTemplateInstancesProvider:j,VkfTemplatesDefault:Y,VkfRendererData:J,VkfFormItemRenderer:z},props:O,emits:Q,setup(e,{emit:t}){const d=$(e),i=b(e),m=A(()=>{if(!e.prop||e.prop.length===0)return e.modelValue;const a={};return D(a,{k:e.prop,v:e.modelValue}),a});function f(a){const o=C(e.modelValue);o.splice(a+1,0,{}),t("update:modelValue",o)}function _(a){const o=C(e.modelValue);o.splice(a,1),t("update:modelValue",o)}const p=()=>{t("update:modelValue",[{},...e.modelValue])},y=a=>{const o=C(m.value);D(o,a),t("update:modelValue",R(o,e.prop))};function v(a){return e.formItems.map(o=>({readonly:i.value,...o,prop:[e.prop??[],a,o.prop].flat()}))}return{formItemBindProps:d,addToFirst:p,readonly:i,handleMinus:_,handlePlus:f,formData:m,handleFormSetData:y,createTheFormItems:v}}}),x={key:0,class:"vkf-card-input-collection-options"},ee={class:"vkf-card-input-collection-card__footer"};function te(e,t,d,i,m,f){const _=r("VkfTemplatesDefault"),p=r("ElButton"),y=r("ElEmpty"),v=r("VkfFormItemRenderer"),a=r("ElCard"),o=r("VkfFormItem"),E=r("VkfRendererData"),h=r("VkfTemplateInstancesProvider");return l(),u(h,{"inherit-templates":e.inheritTemplates},{default:n(()=>[e.inheritTemplates?I("",!0):(l(),u(_,{key:0})),s(E,{data:e.formData,onSetData:e.handleFormSetData},{default:n(()=>[s(o,M(e.formItemBindProps,{class:"vkf-card-input-collection"}),{default:n(()=>[!e.readonly&&e.splicable?(l(),F("div",x,[s(p,{type:"primary",onClick:e.addToFirst},{default:n(()=>t[0]||(t[0]=[V(" 添加 ")])),_:1},8,["onClick"])])):I("",!0),e.modelValue?.length?I("",!0):(l(),u(y,{key:1,class:"vkf-card-input-collection-empty"},{image:n(()=>t[1]||(t[1]=[V(G(""))])),_:1})),(l(!0),F(H,null,L(e.modelValue,(oe,c)=>(l(),u(a,{key:c,class:"vkf-card-input-collection-card",shadow:"hover"},U({default:n(()=>[s(v,{source:e.createTheFormItems(c)},null,8,["source"])]),_:2},[!e.readonly&&e.splicable?{name:"footer",fn:n(()=>[W("div",ee,[s(p,{type:"primary",onClick:()=>e.handlePlus(c)},{default:n(()=>t[2]||(t[2]=[V(" 添加 ")])),_:2},1032,["onClick"]),s(p,{type:"danger",onClick:()=>e.handleMinus(c)},{default:n(()=>t[3]||(t[3]=[V(" 删除 ")])),_:2},1032,["onClick"])])]),key:"0"}:void 0]),1024))),128))]),_:1},16)]),_:1},8,["data","onSetData"])]),_:1},8,["inherit-templates"])}const k=q(Z,[["render",te]]);k.install=e=>{e.component(k.name||"VkfCardInputCollection",k)};const he=B({__name:"basic",setup(e){const t=X([{}]),d=[{templateType:"VkfInput",prop:"question",label:"问题"},{templateType:"VkfInput",prop:"answer",label:"答案"}];return(i,m)=>(l(),u(T(K),null,{default:n(()=>[s(T(k),{modelValue:t.value,"onUpdate:modelValue":m[0]||(m[0]=f=>t.value=f),label:"问答","form-items":d},null,8,["modelValue"])]),_:1}))}});export{he as default};
