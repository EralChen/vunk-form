import{N as g}from"./chunk-Dd5vnLK-.js";import{aj as w,ak as I,p as b,d as T,x as h,P as C,D as k,c as F,al as v,N as D,f as n,o as $,a as O,w as R,b as u,X as E,m as P,W as _}from"./chunk-B7yAMqV2.js";import{_ as j,g as B}from"./chunk-BX0mH7Ac.js";import{o as L,q as N}from"./chunk-cqKyegso.js";import{g as q}from"./chunk-B-mQUuBe.js";import{V as A}from"./chunk-DrHEUj93.js";import{V as H}from"./chunk-DihJ_1FE.js";const W={...w,data:{type:Object,default:()=>({})},formItems:{type:Array,default:()=>[]},readonly:{type:Boolean},elRef:{type:Function,default:()=>g},layout:{type:Boolean,default:!1},rowSource:{type:Object,default:()=>({})},colSource:{type:Object,default:()=>({})}},X={...I,setData:e=>e,validate:null,submit:null},z=e=>24-e.templateSlots.reduce((o,a)=>{if(!a.span)throw new Error("ElColSource span is required");return o+a.span},0),G=(e,o={})=>{const a=e.span??o.span;if(a==null)throw new Error("genColItem ElColSource span is required");return{...o,templateType:"ElCol",span:a,templateSlots:[b(e,{excludes:["span"]})]}},J=(e,o={})=>({...o,templateType:"ElRow",templateSlots:e?[e]:[]}),K=T({name:"VkfForm",components:{ElForm:h,VkfFormItemRenderer:j,VkfTemplatesDefault:A,VkfTemplatesLayout:H},props:W,emits:X,setup(e,{emit:o}){const a=L(e,["model"]),c=N(o),s=C(),d=v();k("vkfFormVm",d),k("elFormRef",s);const l=t=>{s.value=t,e.elRef(t)},m=F(()=>e.layout?e.formItems.reduce((t,r)=>{const f=t.findLast(V=>V.templateType==="ElRow"),S=r.span??e.colSource.span;if(!S)return t.push(r),t;if(Reflect.has(r,"templateIf")&&!B(r.templateIf)(e.data))return t;const y=G(r,e.colSource);return!f||z(f)<S?t.push(J(y,e.rowSource)):f.templateSlots.push(y),t},[]):e.formItems);return{formProps:a,formEmits:c,getValue:q,getRef:l,computed:F,rendererSource:m,handleSubmit:t=>{t.preventDefault(),o("submit",t)}}}});function M(e,o,a,c,s,d){const l=n("VkfTemplatesDefault"),m=n("VkfTemplatesLayout"),i=n("VkfFormItemRenderer"),t=n("ElForm");return $(),O(t,P(e.formProps,{ref:e.getRef,class:{"is-readonly":e.readonly},model:e.model||e.data},_(e.formEmits),{onSubmit:e.handleSubmit}),{default:R(()=>[u(i,{source:e.rendererSource},{default:R(()=>[u(l,{data:e.data,onSetData:o[0]||(o[0]=r=>e.$emit("setData",r))},null,8,["data"]),u(m,{data:e.data},null,8,["data"]),E(e.$slots,"rendererTemplate")]),_:3},8,["source"]),E(e.$slots,"default")]),_:3},16,["class","model","onSubmit"])}const p=D(K,[["render",M]]);p.install=e=>{e.component(p.name,p)};export{p as V};
