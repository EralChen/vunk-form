import{p as B,t as g,v as b,V as w,c as C,w as F,x as I,u as U}from"./chunk-4avqd0lp.js";import{d as $,ax as _,ay as j,r as E,az as O,c as z,H,x as K,N as M,f as m,o as n,a as i,w as f,m as P,W as N,a2 as R,g as A,F as D,G as h,a3 as G,I as L,X as T,Y as W,Z as X}from"./chunk-CApvMCHp.js";const Y={...B,...g,options:{type:Array,default:()=>[]},selectSlots:{type:Object,default:void 0},optionsUrl:{type:String,default:""},defaultModelValue:null},Z={...b},q=$({name:"VkfSelect",components:{VkfFormItem:w,ElSelect:_,ElOption:j},props:Y,emits:Z,setup(e,{emit:r}){const y=C(e),c=F(e,["disabled","modelValue"]),k=I(r),V=U(e),o=E([]),u=t=>{t?fetch(t).then(s=>s.json()).then(s=>{o.value=s}):o.value=[]};e.optionsUrl&&u(e.optionsUrl),O(()=>e.optionsUrl,t=>{r("update:modelValue",void 0),u(t)});const p=t=>K(t.value)?t.value[c.value.valueKey]:t.value,a=z(()=>(o.value.length?o.value:e.options).reduce((s,S)=>{const d=p(S);return!d&&d!==0&&d!==!1||s.push({...S,key:d}),s},[])),l=E(!0);return O(()=>c.value.multiple,()=>{r("update:modelValue",void 0),l.value=!1,H(()=>{l.value=!0})}),{formItemBindProps:y,selectBindProps:c,selectOnEmits:k,selectOptions:a,reshow:l,readonly:V}}});function J(e,r,y,c,k,V){const o=m("ElOption"),u=m("ElSelect"),p=m("VkfFormItem");return n(),i(p,W(X(e.formItemBindProps)),{default:f(()=>[e.reshow?(n(),i(u,P({key:0},e.selectBindProps,{"model-value":e.defaultModelValue??e.modelValue,disabled:e.readonly||e.disabled,class:{"is-readonly":e.readonly}},N(e.selectOnEmits)),R({default:f(()=>[(n(!0),A(D,null,h(e.selectOptions,a=>(n(),i(o,P({ref_for:!0},a,{key:a.key}),null,16))),128))]),_:2},[h(e.selectSlots,(a,l)=>({name:l,fn:f(t=>[(n(),i(G(a?.(t))))])}))]),1040,["model-value","disabled","class"])):L("",!0),T(e.$slots,"default")]),_:3},16)}const v=M(q,[["render",J]]);v.install=e=>{e.component(v.name,v)};export{v as V};
