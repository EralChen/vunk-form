import{R as nt}from"./chunk-vdB3q2D_.js";import{b0 as ot,r as D,az as rt,A as st,b1 as ct,O as E,b2 as H,b3 as at,b4 as ut,b5 as ft,b6 as it,H as lt,b7 as ht,b8 as dt,c as mt}from"./chunk-CApvMCHp.js";import{R as vt}from"./chunk-zKPkODU6.js";/*!
 * pinia v2.2.6
 * (c) 2024 Eduardo San Martin Morote
 * @license MIT
 */let M;const U=t=>M=t,yt=Symbol();function F(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var I;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(I||(I={}));const V=()=>{};function z(t,n,o,e=V){t.push(n);const r=()=>{const u=t.indexOf(n);u>-1&&(t.splice(u,1),e())};return!o&&ft()&&it(r),r}function P(t,...n){t.slice().forEach(o=>{o(...n)})}const bt=t=>t(),B=Symbol(),_=Symbol();function L(t,n){t instanceof Map&&n instanceof Map?n.forEach((o,e)=>t.set(e,o)):t instanceof Set&&n instanceof Set&&n.forEach(t.add,t);for(const o in n){if(!n.hasOwnProperty(o))continue;const e=n[o],r=t[o];F(r)&&F(e)&&t.hasOwnProperty(o)&&!E(e)&&!H(e)?t[o]=L(r,e):t[o]=e}return t}const pt=Symbol();function St(t){return!F(t)||!t.hasOwnProperty(pt)}const{assign:y}=Object;function wt(t){return!!(E(t)&&t.effect)}function gt(t,n,o,e){const{state:r,actions:u,getters:s}=n,f=o.state.value[t];let i;function m(){f||(o.state.value[t]=r?r():{});const d=ht(o.state.value[t]);return y(d,u,Object.keys(s||{}).reduce((b,p)=>(b[p]=dt(mt(()=>{U(o);const S=o._s.get(t);return s[p].call(S,S)})),b),{}))}return i=Z(t,m,n,o,e,!0),i}function Z(t,n,o={},e,r,u){let s;const f=y({actions:{}},o),i={deep:!0};let m,d,b=[],p=[],S;const w=e.state.value[t];!u&&!w&&(e.state.value[t]={}),D({});let q;function W(a){let c;m=d=!1,typeof a=="function"?(a(e.state.value[t]),c={type:I.patchFunction,storeId:t,events:S}):(L(e.state.value[t],a),c={type:I.patchObject,payload:a,storeId:t,events:S});const l=q=Symbol();lt().then(()=>{q===l&&(m=!0)}),d=!0,P(b,c,e.state.value[t])}const X=u?function(){const{state:c}=o,l=c?c():{};this.$patch(g=>{y(g,l)})}:V;function N(){s.stop(),b=[],p=[],e._s.delete(t)}const K=(a,c="")=>{if(B in a)return a[_]=c,a;const l=function(){U(e);const g=Array.from(arguments),C=[],O=[];function tt(h){C.push(h)}function et(h){O.push(h)}P(p,{args:g,name:l[_],store:v,after:tt,onError:et});let j;try{j=a.apply(this&&this.$id===t?this:v,g)}catch(h){throw P(O,h),h}return j instanceof Promise?j.then(h=>(P(C,h),h)).catch(h=>(P(O,h),Promise.reject(h))):(P(C,j),j)};return l[B]=!0,l[_]=c,l},T={_p:e,$id:t,$onAction:z.bind(null,p),$patch:W,$reset:X,$subscribe(a,c={}){const l=z(b,a,c.detached,()=>g()),g=s.run(()=>rt(()=>e.state.value[t],C=>{(c.flush==="sync"?d:m)&&a({storeId:t,type:I.direct,events:S},C)},y({},i,c)));return l},$dispose:N},v=st(T);e._s.set(t,v);const R=(e._a&&e._a.runWithContext||bt)(()=>e._e.run(()=>(s=ct()).run(()=>n({action:K}))));for(const a in R){const c=R[a];if(E(c)&&!wt(c)||H(c))u||(w&&St(c)&&(E(c)?c.value=w[a]:L(c,w[a])),e.state.value[t][a]=c);else if(typeof c=="function"){const l=K(c,a);R[a]=l,f.actions[a]=c}}return y(v,R),y(at(v),R),Object.defineProperty(v,"$state",{get:()=>e.state.value[t],set:a=>{W(c=>{y(c,a)})}}),e._p.forEach(a=>{y(v,s.run(()=>a({store:v,app:e._a,pinia:e,options:f})))}),w&&u&&o.hydrate&&o.hydrate(v.$state,w),m=!0,d=!0,v}/*! #__NO_SIDE_EFFECTS__ */function Pt(t,n,o){let e,r;const u=typeof n=="function";e=t,r=u?o:n;function s(f,i){const m=ut();return f=f||(m?ot(yt,null):null),f&&U(f),f=M,f._s.has(e)||(u?Z(e,n,r,f):gt(e,r,f)),f._s.get(e)}return s.$id=e,s}/*! js-cookie v3.0.5 | MIT */function x(t){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var e in o)t[e]=o[e]}return t}var Rt={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function k(t,n){function o(r,u,s){if(!(typeof document>"u")){s=x({},n,s),typeof s.expires=="number"&&(s.expires=new Date(Date.now()+s.expires*864e5)),s.expires&&(s.expires=s.expires.toUTCString()),r=encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var f="";for(var i in s)s[i]&&(f+="; "+i,s[i]!==!0&&(f+="="+s[i].split(";")[0]));return document.cookie=r+"="+t.write(u,r)+f}}function e(r){if(!(typeof document>"u"||arguments.length&&!r)){for(var u=document.cookie?document.cookie.split("; "):[],s={},f=0;f<u.length;f++){var i=u[f].split("="),m=i.slice(1).join("=");try{var d=decodeURIComponent(i[0]);if(s[d]=t.read(m,d),r===d)break}catch{}}return r?s[r]:s}}return Object.create({set:o,get:e,remove:function(r,u){o(r,"",x({},u,{expires:-1}))},withAttributes:function(r){return k(this.converter,x({},this.attributes,r))},withConverter:function(r){return k(x({},this.converter,r),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}var $=k(Rt,{path:"/"});const J="VUNK_SKZZ_REST_PLATFORM";function Ct(){return $.get(J)||""}function jt(t){return $.set(J,t)}const It=new vt({baseURL:"/data"}),xt=async(...t)=>await It.request(...t),Y=async()=>xt({method:"GET",url:"/platforms.json",cache:{id:"platforms"}}).then(t=>(t.forEach(n=>{n.code==="default"&&(n.url=A.baseURL)}),t)),Et=async t=>Y().then(n=>n.find(o=>o.code===t)).then(n=>(n&&G().setPlatformInfo(n),n)),Ot=async()=>Y().then(t=>t[0]),G=Pt("platform",()=>{const t=D({}),n=r=>{t.value=r,jt(r.code)},o=async r=>{r?await Et(r).then(u=>{u&&n(u)}):await Ot().then(u=>{n(u)})};return{platformInfo:t,setPlatformInfoByCode:o,getPlatformInfo:async()=>(t.value.code||await o(Ct()||""),t.value),setPlatformInfo:n}});var Q=(t=>(t.search="search",t.increase="increase",t.modify="modify",t.remove="remove",t))(Q||{});const A=new nt({baseURL:"",requestThen:t=>(t.code===401&&window.location.reload(),t)});function _t(t){return async(...n)=>{let o;try{o=G()}catch{console.warn("usePlatformStore  is not defined")}const e=await o?.getPlatformInfo();return e?.url&&(A.baseURL=e.url),t(...n)}}const Ft=async(...t)=>{const[n]=t;if(n.url==="/core/busi/query"){const e=n.data;e.buttonId||(e.buttonId=Q.search)}return await A.request(...t)},qt=_t(Ft);export{A as a,qt as r,_t as w};
