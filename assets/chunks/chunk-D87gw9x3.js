import{p as B,t as g,v as w,V as U,c as b,w as C,x as F,u as I}from"./chunk-DC95vdEF.js";import{d as $,aw as _,ax as j,r as E,ay as O,c as M,H,x as K,M as R,f as m,o as n,a as i,w as f,m as P,U as z,a1 as A,g as D,F as G,G as h,a2 as L,I as N,W as T,X as W,Y as X}from"./chunk-CYWh0Wrq.js";const Y={...B,...g,options:{type:Array,default:()=>[]},selectSlots:{type:Object,default:void 0},optionsUrl:{type:String,default:""},defaultModelValue:null},q={...w},J=$({name:"VkfSelect",components:{VkfFormItem:U,ElSelect:_,ElOption:j},props:Y,emits:q,setup(e,{emit:r}){const y=b(e),c=C(e,["disabled","modelValue"]),k=F(r),V=I(e),o=E([]),u=t=>{t?fetch(t).then(s=>s.json()).then(s=>{o.value=s}):o.value=[]};e.optionsUrl&&u(e.optionsUrl),O(()=>e.optionsUrl,t=>{r("update:modelValue",void 0),u(t)});const p=t=>K(t.value)?t.value[c.value.valueKey]:t.value,a=M(()=>(o.value.length?o.value:e.options).reduce((s,S)=>{const d=p(S);return!d&&d!==0&&d!==!1||s.push({...S,key:d}),s},[])),l=E(!0);return O(()=>c.value.multiple,()=>{r("update:modelValue",void 0),l.value=!1,H(()=>{l.value=!0})}),{formItemBindProps:y,selectBindProps:c,selectOnEmits:k,selectOptions:a,reshow:l,readonly:V}}});function Q(e,r,y,c,k,V){const o=m("ElOption"),u=m("ElSelect"),p=m("VkfFormItem");return n(),i(p,W(X(e.formItemBindProps)),{default:f(()=>[e.reshow?(n(),i(u,P({key:0},e.selectBindProps,{"model-value":e.defaultModelValue??e.modelValue,disabled:e.readonly||e.disabled,class:{"is-readonly":e.readonly}},z(e.selectOnEmits)),A({default:f(()=>[(n(!0),D(G,null,h(e.selectOptions,a=>(n(),i(o,P({ref_for:!0},a,{key:a.key}),null,16))),128))]),_:2},[h(e.selectSlots,(a,l)=>({name:l,fn:f(t=>[(n(),i(L(a?.(t))))])}))]),1040,["model-value","disabled","class"])):N("",!0),T(e.$slots,"default")]),_:3},16)}const v=R(J,[["render",Q]]);v.install=e=>{e.component(v.name,v)};export{v as V};
