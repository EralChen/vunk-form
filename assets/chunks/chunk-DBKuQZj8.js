import{N as g}from"./chunk-GB91i2a_.js";import{ai as h,aj as E,p as _,d as w,A as b,ak as v,al as R,c as F,am as C,R as D,g as n,o as I,a as $,w as c,b as m,h as P,F as B,r as T,an as O,m as j,Y as L}from"./chunk-9eDQGDPh.js";import{_ as N,g as q}from"./chunk-SFMK0eOr.js";import{o as A,q as H}from"./chunk-CrV41Nja.js";import{g as Y}from"./chunk-DyvYxXn8.js";import{V as z}from"./chunk-6RANyLHh.js";import{V as G}from"./chunk-D5z-H5UG.js";import{_ as J}from"./chunk-1Lda8Zo8.js";import{_ as K}from"./chunk-DEzQhqpj.js";const M={...h,data:{type:Object,default:()=>({})},formItems:{type:Array,default:()=>[]},readonly:{type:Boolean},elRef:{type:Function,default:()=>g},layout:{type:Boolean,default:!1},rowSource:{type:Object,default:()=>({})},colSource:{type:Object,default:()=>({})},inheritTemplates:{type:Boolean,default:!1}},Q={...E,setData:e=>e,validate:null,submit:null},U=e=>24-e.templateSlots.reduce((o,a)=>{if(!a.span)throw new Error("ElColSource span is required");return o+a.span},0),W=(e,o={})=>{const a=e.span??o.span;if(a==null)throw new Error("genColItem ElColSource span is required");return{...o,templateType:"ElCol",span:a,templateSlots:[_(e,{excludes:["span"]})]}},X=(e,o={})=>({...o,templateType:"ElRow",templateSlots:e?[e]:[]}),Z=w({name:"VkfForm",components:{VkfTemplateInstancesProvider:J,VkfRendererData:K,ElForm:b,VkfFormItemRenderer:N,VkfTemplatesDefault:z,VkfTemplatesLayout:G},props:M,emits:Q,setup(e,{emit:o}){const a=A(e,["model"]),d=H(o),f=v(),k=C();R("vkfFormVm",k),R("elFormRef",f);const p=t=>{f.value=t,e.elRef(t)},u=F(()=>e.layout?e.formItems.reduce((t,r)=>{const s=t.findLast(S=>S.templateType==="ElRow"),l=r.span??e.colSource.span;if(!l)return t.push(r),t;if(Reflect.has(r,"templateIf")&&!q(r.templateIf)(e.data))return t;const y=W(r,e.colSource);return!s||U(s)<l?t.push(X(y,e.rowSource)):s.templateSlots.push(y),t},[]):e.formItems);return{formProps:a,formEmits:d,getValue:Y,getRef:p,computed:F,rendererSource:u,handleSubmit:t=>{t.preventDefault(),o("submit",t)}}}});function x(e,o,a,d,f,k){const p=n("VkfTemplatesDefault"),u=n("VkfTemplatesLayout"),V=n("VkfFormItemRenderer"),t=n("VkfRendererData"),r=n("VkfTemplateInstancesProvider"),s=n("ElForm");return I(),$(s,j(e.formProps,{ref:e.getRef,class:{"is-readonly":e.readonly},model:e.model||e.data},L(e.formEmits),{onSubmit:e.handleSubmit}),{default:c(()=>[m(r,{"inherit-templates":e.inheritTemplates},{default:c(()=>[e.inheritTemplates?O("",!0):(I(),P(B,{key:0},[m(p),m(u),T(e.$slots,"rendererTemplate")],64)),m(t,{data:e.data,onSetData:o[0]||(o[0]=l=>e.$emit("setData",l))},{default:c(()=>[m(V,{source:e.rendererSource},null,8,["source"])]),_:1},8,["data"])]),_:3},8,["inherit-templates"]),T(e.$slots,"default")]),_:3},16,["class","model","onSubmit"])}const i=D(Z,[["render",x]]);i.install=e=>{e.component(i.name,i)};export{i as V};
