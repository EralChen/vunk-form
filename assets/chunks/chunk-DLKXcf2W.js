import{N as g}from"./chunk-Dd5vnLK-.js";import{ap as w,aq as I,p as b,d as T,x as h,O as C,D as F,c as R,ar as v,M as D,f as n,o as O,a as $,w as k,b as u,X as E,m as P,W as _}from"./chunk-Dr2pd04r.js";import{_ as B,g as j}from"./chunk-CdeRgiLc.js";import{o as q,q as L}from"./chunk-lmOyQrer.js";import{g as N}from"./chunk-B-mQUuBe.js";import{V as A}from"./chunk-Z3iUL4cx.js";import{V as H}from"./chunk-BMAFDzXW.js";const M={...w,data:{type:Object,default:()=>({})},formItems:{type:Array,default:()=>[]},readonly:{type:Boolean},elRef:{type:Function,default:()=>g},layout:{type:Boolean,default:!1},rowSource:{type:Object,default:()=>({})},colSource:{type:Object,default:()=>({})}},W={...I,setData:e=>e,validate:null,submit:null},X=e=>24-e.templateSlots.reduce((o,a)=>{if(!a.span)throw new Error("ElColSource span is required");return o+a.span},0),z=(e,o={})=>{const a=e.span??o.span;if(a==null)throw new Error("genColItem ElColSource span is required");return{...o,templateType:"ElCol",span:a,templateSlots:[b(e,{excludes:["span"]})]}},G=(e,o={})=>({...o,templateType:"ElRow",templateSlots:e?[e]:[]}),J=T({name:"VkfForm",components:{ElForm:h,VkfFormItemRenderer:B,VkfTemplatesDefault:A,VkfTemplatesLayout:H},props:M,emits:W,setup(e,{emit:o}){const a=q(e,["model"]),c=L(o),s=C(),d=v();F("vkfFormVm",d),F("elFormRef",s);const l=t=>{s.value=t,e.elRef(t)},m=R(()=>e.layout?e.formItems.reduce((t,r)=>{const f=t.findLast(V=>V.templateType==="ElRow"),S=r.span??e.colSource.span;if(!S)return t.push(r),t;if(Reflect.has(r,"templateIf")&&!j(r.templateIf)(e.data))return t;const y=z(r,e.colSource);return!f||X(f)<S?t.push(G(y,e.rowSource)):f.templateSlots.push(y),t},[]):e.formItems);return{formProps:a,formEmits:c,getValue:N,getRef:l,computed:R,rendererSource:m,handleSubmit:t=>{t.preventDefault(),o("submit",t)}}}});function K(e,o,a,c,s,d){const l=n("VkfTemplatesDefault"),m=n("VkfTemplatesLayout"),i=n("VkfFormItemRenderer"),t=n("ElForm");return O(),$(t,P(e.formProps,{ref:e.getRef,class:{"is-readonly":e.readonly},model:e.model||e.data},_(e.formEmits),{onSubmit:e.handleSubmit}),{default:k(()=>[u(i,{source:e.rendererSource},{default:k(()=>[u(l,{data:e.data,onSetData:o[0]||(o[0]=r=>e.$emit("setData",r))},null,8,["data"]),u(m,{data:e.data},null,8,["data"]),E(e.$slots,"rendererTemplate")]),_:3},8,["source"]),E(e.$slots,"default")]),_:3},16,["class","model","onSubmit"])}const p=D(J,[["render",K]]);p.install=e=>{e.component(p.name,p)};export{p as V};
