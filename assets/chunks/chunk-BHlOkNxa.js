import{$ as s,a0 as i,dF as g,a2 as x,s as c,dR as E,dh as b,ar as F,bc as d}from"./chunk-BCtBXoS3.js";const D=m=>{let e=class extends m{constructor(){super(...arguments),this.view=null}async fetchPopupFeaturesAtLocation(p,n){const{layer:r}=this;if(!p)throw new c("imagerylayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:r});const{popupEnabled:u}=r,a=E(r,n);if(!u||a==null)throw new c("imagerylayerview:fetchPopupFeatures","Missing required popupTemplate or popupEnabled",{popupEnabled:u,popupTemplate:a});const y=await a.getRequiredFields();b(n);const t=new F;t.timeExtent=this.timeExtent,t.geometry=p,t.outFields=y,t.outSpatialReference=p.spatialReference;const{resolution:o,spatialReference:l}=this.view,w=this.view.type==="2d"?new d(o,o,l):new d(.5*o,.5*o,l),{returnTopmostRaster:h,showNoDataRecords:R}=a.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1},f={returnDomainValues:!0,returnTopmostRaster:h,pixelSize:w,showNoDataRecords:R,signal:n?.signal};return r.queryVisibleRasters(t,f).then(v=>v)}canResume(){return!!super.canResume()&&!this.timeExtent?.isEmpty}};return s([i()],e.prototype,"layer",void 0),s([i()],e.prototype,"suspended",void 0),s([i(g)],e.prototype,"timeExtent",void 0),s([i()],e.prototype,"view",void 0),e=s([x("esri.views.layers.ImageryLayerView")],e),e};export{D as u};
