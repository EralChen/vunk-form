import{p as P,V as D,c as I,u as $}from"./chunk-CrV41Nja.js";import{aN as w,d as S,aO as T,Z as A,u as E,aP as N,aQ as R,K as O,aR as z,z as y,c as k,b as r,aS as M,aT as j,F as K,aU as h,R as W,g as d,o as _,a as v,w as m,an as C,I as H,J,h as Q,n as U}from"./chunk-9eDQGDPh.js";import{e as B,g as Z}from"./chunk-DyvYxXn8.js";import{V as q}from"./chunk-6RANyLHh.js";import{_ as x}from"./chunk-1Lda8Zo8.js";import{_ as G}from"./chunk-SFMK0eOr.js";import{_ as L}from"./chunk-DEzQhqpj.js";const X={...P,columns:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]},readonly:{type:Boolean,default:void 0},splicable:{type:Boolean,default:!0},inheritTemplates:{type:Boolean,default:!1}},Y={"update:modelValue":null},F={type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showTooltipWhenOverflow:Boolean,showOverflowTooltip:Boolean,fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},index:[Number,Function],sortOrders:{type:Array,default:()=>["ascending","descending",null],validator:e=>e.every(o=>["ascending","descending",null].includes(o))}},ee=A(F),te={...F,source:{type:Array,default:()=>[]}};var ae=S({name:"VkTableColumns",components:{ElTableColumn:T},props:te,setup(e){const o=ee(e);return()=>{const p=(c=e.source)=>c.reduce((u,n)=>{if(E(n.hidden))return u;let s={};N(n.slots)&&(s=n.slots),typeof n.slots=="function"&&(s.default=n.slots),n.children&&(s.default=()=>p(n.children));const l={key:n.prop,...o.value,...R(n,{excludes:["children","slots"]})};return Object.keys(l).forEach(i=>{(l[i]===void 0||l[i]===null||l[i]==="")&&Reflect.deleteProperty(l,i)}),u.push(O(T,l,s)),u},[]);return p(e.source)}}}),V=w(ae,[["__file","/home/runner/work/vunk-plus/vunk-plus/packages/components/table-columns/src/index.vue"]]);V.install=e=>{e.component(V.name,V)};const ne=S({name:"VkfInputCollection",components:{ElTable:z,ElButton:y,VkTableColumns:V,VkfFormItem:D,VkfTemplateInstancesProvider:x,VkfTemplatesDefault:q,VkfRendererData:L},props:X,emits:Y,setup(e,{emit:o}){const p=I(e),c=$(e),u=k(()=>{if(!e.prop||e.prop.length===0)return e.modelValue;const t={};return B(t,{k:e.prop,v:e.modelValue}),t}),n=k(()=>e.columns.map(t=>({...t,slots:a=>r(G,{source:[{prop:[e.prop??[],a.$index,t.prop].flat(),templateType:t.templateType,readonly:c.value,...t.templateProps,...t.createTemplateProps?.(a)}]},null)}))),f=k(()=>({label:"操作",align:"center",width:"120px",hidden:c.value||!e.splicable,slots:({$index:t})=>r(K,null,[r(y,{size:"small",icon:M,onClick:()=>s(t)},null),r(y,{size:"small",icon:j,onClick:()=>l(t)},null)])}));function s(t){const a=h(e.modelValue);a.splice(t+1,0,{}),o("update:modelValue",a)}function l(t){const a=h(e.modelValue);a.splice(t,1),o("update:modelValue",a)}return{addToFirst:()=>{o("update:modelValue",[{},...e.modelValue])},formItemBindProps:p,readonly:c,fullColumns:n,buttonsColumn:f,handleFormSetData:t=>{const a=h(u.value);B(a,t),o("update:modelValue",Z(a,e.prop))},formData:u}}}),oe={key:0,class:"vkf-input-collection-options"};function le(e,o,p,c,u,n){const f=d("VkfTemplatesDefault"),s=d("ElButton"),l=d("VkTableColumns"),i=d("ElTable"),g=d("VkfFormItem"),t=d("VkfRendererData"),a=d("VkfTemplateInstancesProvider");return _(),v(a,{"inherit-templates":e.inheritTemplates},{default:m(()=>[e.inheritTemplates?C("",!0):(_(),v(f,{key:0})),r(t,{data:e.formData,onSetData:e.handleFormSetData},{default:m(()=>[r(g,H(J(e.formItemBindProps)),{default:m(()=>[!e.readonly&&e.splicable?(_(),Q("div",oe,[r(s,{type:"primary",onClick:e.addToFirst},{default:m(()=>o[0]||(o[0]=[U(" 添加 ")])),_:1},8,["onClick"])])):C("",!0),r(i,{data:e.modelValue,class:"vkf-input-collection-table"},{default:m(()=>[r(l,{source:[...e.fullColumns,e.buttonsColumn]},null,8,["source"])]),_:1},8,["data"])]),_:1},16)]),_:1},8,["data","onSetData"])]),_:1},8,["inherit-templates"])}const b=W(ne,[["render",le]]);b.install=e=>{e.component(b.name||"VkfInputCollection",b)};export{b as V};
