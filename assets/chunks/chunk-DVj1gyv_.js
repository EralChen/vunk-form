import{bh as v,ap as f,b1 as D,c as V,k as C,d as b,h as E,S as U,bi as q,aq as w}from"./chunk-Dw53j9Qa.js";import{d as g,g as K}from"./chunk-DyvYxXn8.js";const H=()=>{const e=v({});return f("vkTemplateInstances",e),e},h=()=>D("vkTemplateInstances",null),J=(e,n)=>{const a=V(()=>e.data),p={data:a,emitSetData:s=>{n.emit("setData",{intoUndefined:g,...s})},getDataValue:s=>K(a.value,s,g,!0)};return f("vkRendererData",p),p},P=()=>D("vkRendererData",{}),$={source:{type:Array,default:()=>[]},templateInstances:{type:Object,default:void 0},k:{type:Array,default:()=>[]}},L=(e,n={})=>{let a="";a+=n.prefix||"";for(const r in e)e[r].forEach(o=>{a+=o.message+";"});a+=n.suffix||"",C({type:"warning",message:a})},M=e=>{if(typeof e=="boolean"){const n=e;return()=>n}else{if(typeof e=="string")return new Function("data",e);if(typeof e=="function")return e}return()=>!0},S=b({name:"VkfFormItemRenderer",props:$,setup(e,n){const a=h(),{emitSetData:r,data:o,getDataValue:p}=P(),s=e.templateInstances??a??v({});f("vkTemplateInstances",s);const F=l=>E(S,{templateInstances:s,...l}),R=(l,_=[])=>l.reduce((u,t,j)=>{t.key=t.key??(Array.isArray(t.prop)?t.prop.join():t.prop);const y=[...e.k,..._,j],x=()=>{U(()=>{t.templateType&&!s[t.templateType]&&console.warn(t.templateType,"templateType不存在将跳过")})};if(t.templateType&&s[t.templateType]){const T=M(t.templateIf);if(!(o?T(o.value):!0))return u;const m={...t};Reflect.deleteProperty(m,"templateType"),Reflect.deleteProperty(m,"templateIf");const A=y.join(",")+"-"+t.templateType+"-"+(t.prop||"no-prop"),I=V({get:()=>t.prop&&p?.(t.prop),set:c=>r?.({k:t.prop,v:c})}),k=s[t.templateType].slots.default?.({data:m,raw:t,props:m,k:y,key:A,value:I.value,input:c=>I.value=c,templateIf:T,Renderer:F,getDataValue:p,emitSetData:r});k&&u.push(k)}else x();return u},[]);return()=>[n.slots.default?.(),R(e.source)]}}),i=S;i.install=e=>{e.component(i.name,i)};const O={type:{type:String,required:!0,default:""}},d=b({name:"VkfFormItemRendererTemplate",props:O,setup(e){const n=h();if(!n)throw new Error;const a=w(),r=n[e.type];return a&&n&&(n[e.type]=a),q(()=>{n[e.type]=r}),()=>null}});d.install=e=>{e.component(d.name,d)};export{i as _,d as a,J as b,M as g,H as i,h as u,L as v};
