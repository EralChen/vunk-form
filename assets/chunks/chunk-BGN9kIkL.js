import{bk as v,aj as f,b4 as D,c as V,d as b,bl as C,ak as E,k as U,h as w,S as K}from"./chunk-C7ZeX_9O.js";import{d as g,g as P}from"./chunk-DyvYxXn8.js";const H=()=>{const e=v({});return f("vkTemplateInstances",e),e},S=()=>D("vkTemplateInstances",null),J=(e,n)=>{const a=V(()=>e.data),p={data:a,emitSetData:s=>{n.emit("setData",{intoUndefined:g,...s})},getDataValue:s=>P(a.value,s,g,!0)};return f("vkRendererData",p),p},$=()=>D("vkRendererData",{}),q={type:{type:String,required:!0,default:""}},i=b({name:"VkfFormItemRendererTemplate",props:q,setup(e){const n=S();if(!n)throw new Error;const a=E(),r=n[e.type];return a&&n&&(n[e.type]=a),C(()=>{n[e.type]=r}),()=>null}});i.install=e=>{e.component(i.name,i)};const L=(e,n={})=>{let a="";a+=n.prefix||"";for(const r in e)e[r].forEach(o=>{a+=o.message+";"});a+=n.suffix||"",U({type:"warning",message:a})},M=e=>{if(typeof e=="boolean"){const n=e;return()=>n}else{if(typeof e=="string")return new Function("data",e);if(typeof e=="function")return e}return()=>!0},O={source:{type:Array,default:()=>[]},templateInstances:{type:Object,default:void 0},k:{type:Array,default:()=>[]}},h=b({name:"VkfFormItemRenderer",props:O,setup(e,n){const a=S(),{emitSetData:r,data:o,getDataValue:p}=$(),s=e.templateInstances??a??v({});f("vkTemplateInstances",s);const F=l=>w(h,{templateInstances:s,...l}),R=(l,j=[])=>l.reduce((u,t,_)=>{t.key=t.key??(Array.isArray(t.prop)?t.prop.join():t.prop);const y=[...e.k,...j,_],x=()=>{K(()=>{t.templateType&&!s[t.templateType]&&console.warn(t.templateType,"templateType不存在将跳过")})};if(t.templateType&&s[t.templateType]){const T=M(t.templateIf);if(!(o?T(o.value):!0))return u;const m={...t};Reflect.deleteProperty(m,"templateType"),Reflect.deleteProperty(m,"templateIf");const A=y.join(",")+"-"+t.templateType+"-"+(t.prop||"no-prop"),k=V({get:()=>t.prop&&p?.(t.prop),set:c=>r?.({k:t.prop,v:c})}),I=s[t.templateType].slots.default?.({data:m,raw:t,props:m,k:y,key:A,value:k.value,input:c=>k.value=c,templateIf:T,Renderer:F,getDataValue:p,emitSetData:r});I&&u.push(I)}else x();return u},[]);return()=>[n.slots.default?.(),R(e.source)]}}),d=h;d.install=e=>{e.component(d.name,d)};export{d as _,i as a,J as b,M as g,H as i,S as u,L as v};
