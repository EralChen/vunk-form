import{N as g}from"./chunk-Dd5vnLK-.js";import{ao as w,ap as I,p as b,d as T,v as h,O as C,C as F,c as R,aq as v,M as O,f as n,o as $,a as D,w as k,b as u,W as E,m as P,U as _}from"./chunk-CYWh0Wrq.js";import{_ as B,g as j}from"./chunk-Btddj6lZ.js";import{o as q,q as L}from"./chunk-DC95vdEF.js";import{g as N}from"./chunk-B-mQUuBe.js";import{V as A}from"./chunk-xotXDcNP.js";import{V as H}from"./chunk-qEN6DhVs.js";const M={...w,data:{type:Object,default:()=>({})},formItems:{type:Array,default:()=>[]},readonly:{type:Boolean},elRef:{type:Function,default:()=>g},layout:{type:Boolean,default:!1},rowSource:{type:Object,default:()=>({})},colSource:{type:Object,default:()=>({})}},U={...I,setData:e=>e,validate:null,submit:null},W=e=>24-e.templateSlots.reduce((o,a)=>{if(!a.span)throw new Error("ElColSource span is required");return o+a.span},0),z=(e,o={})=>{const a=e.span??o.span;if(a==null)throw new Error("genColItem ElColSource span is required");return{...o,templateType:"ElCol",span:a,templateSlots:[b(e,{excludes:["span"]})]}},G=(e,o={})=>({...o,templateType:"ElRow",templateSlots:e?[e]:[]}),J=T({name:"VkfForm",components:{ElForm:h,VkfFormItemRenderer:B,VkfTemplatesDefault:A,VkfTemplatesLayout:H},props:M,emits:U,setup(e,{emit:o}){const a=q(e,["model"]),c=L(o),s=C(),d=v();F("vkfFormVm",d),F("elFormRef",s);const l=t=>{s.value=t,e.elRef(t)},m=R(()=>e.layout?e.formItems.reduce((t,r)=>{const f=t.findLast(V=>V.templateType==="ElRow"),S=r.span??e.colSource.span;if(!S)return t.push(r),t;if(Reflect.has(r,"templateIf")&&!j(r.templateIf)(e.data))return t;const y=z(r,e.colSource);return!f||W(f)<S?t.push(G(y,e.rowSource)):f.templateSlots.push(y),t},[]):e.formItems);return{formProps:a,formEmits:c,getValue:N,getRef:l,computed:R,rendererSource:m,handleSubmit:t=>{t.preventDefault(),o("submit",t)}}}});function K(e,o,a,c,s,d){const l=n("VkfTemplatesDefault"),m=n("VkfTemplatesLayout"),i=n("VkfFormItemRenderer"),t=n("ElForm");return $(),D(t,P(e.formProps,{ref:e.getRef,class:{"is-readonly":e.readonly},model:e.model||e.data},_(e.formEmits),{onSubmit:e.handleSubmit}),{default:k(()=>[u(i,{source:e.rendererSource},{default:k(()=>[u(l,{data:e.data,onSetData:o[0]||(o[0]=r=>e.$emit("setData",r))},null,8,["data"]),u(m,{data:e.data},null,8,["data"]),E(e.$slots,"rendererTemplate")]),_:3},8,["source"]),E(e.$slots,"default")]),_:3},16,["class","model","onSubmit"])}const p=O(J,[["render",K]]);p.install=e=>{e.component(p.name,p)};export{p as V};
