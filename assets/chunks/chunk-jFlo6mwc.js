import{p as S,V as F,c as P,u as D}from"./chunk-BvwBNQlH.js";import{aL as I,d as T,aM as h,Z as $,u as w,aN as A,aO as E,D as N,aP as O,s as y,c as k,b as s,aQ as M,aR as z,F as R,aS as b,M as j,q as i,o as v,a as x,w as f,X as W,Y as q,f as H,h as K,I as L}from"./chunk-Isw0PHqr.js";import{V as Q,e as C,g as X}from"./chunk-D_bg5NQa.js";import{_ as Y}from"./chunk-Fe9ISD5h.js";import{_ as Z}from"./chunk-BYdxU15d.js";const G={...S,columns:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]},readonly:{type:Boolean,default:void 0},splicable:{type:Boolean,default:!0}},J={"update:modelValue":null},B={type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showTooltipWhenOverflow:Boolean,showOverflowTooltip:Boolean,fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},index:[Number,Function],sortOrders:{type:Array,default:()=>["ascending","descending",null],validator:e=>e.every(n=>["ascending","descending",null].includes(n))}},U=$(B),ee={...B,source:{type:Array,default:()=>[]}};var te=T({name:"VkTableColumns",components:{ElTableColumn:h},props:ee,setup(e){const n=U(e);return()=>{const p=(c=e.source)=>c.reduce((u,a)=>{if(w(a.hidden))return u;let r={};A(a.slots)&&(r=a.slots),typeof a.slots=="function"&&(r.default=a.slots),a.children&&(r.default=()=>p(a.children));const o={key:a.prop,...n.value,...E(a,{excludes:["children","slots"]})};return Object.keys(o).forEach(d=>{(o[d]===void 0||o[d]===null||o[d]==="")&&Reflect.deleteProperty(o,d)}),u.push(N(h,o,r)),u},[]);return p(e.source)}}}),V=I(te,[["__file","/home/runner/work/vunk-plus/vunk-plus/packages/components/table-columns/src/index.vue"]]);V.install=e=>{e.component(V.name,V)};const ae=T({name:"VkfInputCollection",components:{ElTable:O,ElButton:y,VkTableColumns:V,VkfFormItem:F,VkfTemplateInstancesProvider:Y,VkfTemplatesDefault:Q},props:G,emits:J,setup(e,{emit:n}){const p=P(e),c=D(e),u=k(()=>{if(!e.prop||e.prop.length===0)return e.modelValue;const t={};return C(t,{k:e.prop,v:e.modelValue}),t}),a=k(()=>e.columns.map(t=>({...t,slots:l=>s(Z,{source:[{prop:[e.prop??[],l.$index,t.prop].flat(),templateType:t.templateType,readonly:c.value,...t.templateProps,...t.createTemplateProps?.(l)}]},null)}))),m=k(()=>({label:"操作",align:"center",width:"120px",hidden:c.value||!e.splicable,slots:({$index:t})=>s(R,null,[s(y,{size:"small",icon:M,onClick:()=>r(t)},null),s(y,{size:"small",icon:z,onClick:()=>o(t)},null)])}));function r(t){const l=b(e.modelValue);l.splice(t+1,0,{}),n("update:modelValue",l)}function o(t){const l=b(e.modelValue);l.splice(t,1),n("update:modelValue",l)}return{addToFirst:()=>{n("update:modelValue",[{},...e.modelValue])},formItemBindProps:p,readonly:c,fullColumns:a,buttonsColumn:m,handleFormSetData:t=>{const l=b(u.value);C(l,t),n("update:modelValue",X(l,e.prop))},formData:u}}}),ne={key:0,class:"vkf-input-collection-options"};function le(e,n,p,c,u,a){const m=i("VkfTemplatesDefault"),r=i("ElButton"),o=i("VkTableColumns"),d=i("ElTable"),g=i("VkfFormItem"),t=i("VkfTemplateInstancesProvider");return v(),x(t,null,{default:f(()=>[s(m,{data:e.formData,onSetData:e.handleFormSetData},null,8,["data","onSetData"]),s(g,W(q(e.formItemBindProps)),{default:f(()=>[!e.readonly&&e.splicable?(v(),H("div",ne,[s(r,{type:"primary",onClick:e.addToFirst},{default:f(()=>n[0]||(n[0]=[K(" 添加 ")])),_:1},8,["onClick"])])):L("",!0),s(d,{data:e.modelValue,class:"vkf-input-collection-table"},{default:f(()=>[s(o,{source:[...e.fullColumns,e.buttonsColumn]},null,8,["source"])]),_:1},8,["data"])]),_:1},16)]),_:1})}const _=j(ae,[["render",le]]);_.install=e=>{e.component(_.name||"VkfInputCollection",_)};export{_ as V};
