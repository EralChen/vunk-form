import{r as w}from"./chunk-DOisDe0B.js";import{_}from"./chunk-DgoQUmHQ.js";import{d as g,o as y,h as k,b as c,w as B,n as R,u as E,z as x,F as C}from"./chunk-9eDQGDPh.js";import"./chunk-Bki1Cydo.js";import"./chunk-BZIXDfwC.js";import"./chunk-zKPkODU6.js";import"./chunk-LnDOmgTK.js";import"./chunk-By3pYRVZ.js";import"./chunk-CrV41Nja.js";import"./chunk-DyvYxXn8.js";import"./chunk-DBKuQZj8.js";import"./chunk-GB91i2a_.js";import"./chunk-SFMK0eOr.js";import"./chunk-6RANyLHh.js";import"./chunk-B6wX9VKk.js";import"./chunk-DY7ba3PM.js";import"./chunk-1cWUYT_U.js";import"./chunk-CaCyDyWa.js";import"./chunk-BvKd6roE.js";import"./chunk-iKnkX29l.js";import"./chunk-lfOq2O_2.js";import"./chunk-X_W1x-jA.js";import"./chunk-4fDyzd8m.js";import"./chunk-BOhFrD_H.js";import"./chunk-D5z-H5UG.js";import"./chunk-1Lda8Zo8.js";import"./chunk-DEzQhqpj.js";import"./chunk-fEI7Cr-O.js";const p="65d59a930e288e5add131790",F="c6f7ee1b3d995c2cacf9919b09b68a61",L="/file/downloadByRange",s=200*1024*1024,st=g({__name:"download",setup(T){const l=async()=>{d()},d=async()=>{const{size:n,realName:o}=await w({fileId:p});let e=Math.ceil(n/s);const t=Array.from({length:e},(z,m)=>{const h=m*s,b=Math.min((m+1)*s-1,n-1);return u(h,b)}),a=await Promise.all(t);console.log(a);const i=new Blob(a);console.log(i.size);const r=document.createElement("a"),f=window.URL.createObjectURL(i);r.href=f,r.download=o,r.click()};function u(n,o){return restFetch.response({url:L,method:"GET",params:{fileId:p},setRequestInit(e){const t=e.headers;return t.set("Range",`bytes=${n}-${o}`),t.set("Accept-Ranges","bytes"),t.set("fileServiceType","mongodb"),t.set("tenant","default"),t.set("application","platform"),t.set("token",F),e},responseThen(e){return e.json().then(t=>{console.log(t)}),e.blob()}}).then(e=>e)}return(n,o)=>(y(),k(C,null,[c(_),c(E(x),{type:"primary",onClick:l},{default:B(()=>o[0]||(o[0]=[R(" 下载 ")])),_:1})],64))}});export{st as default};
