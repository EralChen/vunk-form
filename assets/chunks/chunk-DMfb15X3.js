import{p as b,s as M,q as U,V as C,b as F,r as $,t as j,u as w}from"./chunk-CAS0iGZj.js";import{d as I,s as K,v as A,c as S,ar as R,g as E,as as O,S as _,J as N,W as q,l as y,o as d,a as f,w as V,m as P,a4 as z,a5 as D,n as H,F as J,R as B,a6 as L,al as Q,r as T,P as W,Q as G}from"./chunk-C7ZeX_9O.js";const X={...b,...M,options:{type:Array,default:()=>[]},selectSlots:{type:Object,default:void 0},optionsUrl:{type:String,default:""},defaultModelValue:null,stringify:{type:Boolean,default:!1}},Y={...U},Z=I({name:"VkfSelect",components:{VkfFormItem:C,ElSelect:K,ElOption:A},props:X,emits:Y,setup(e,{emit:o}){const k=F(e),i=$(e,["disabled","modelValue"]),g=j(o,["update:modelValue"]),h=w(e),c=S({get:()=>e.multiple&&e.stringify&&typeof e.modelValue=="string"?e.modelValue?e.modelValue.split(","):[]:e.modelValue??e.defaultModelValue,set:t=>{if(e.multiple&&e.stringify&&Array.isArray(t)){const a=t.reduce((r,l)=>(typeof l=="string"?r.push(l):R(l)&&l[e.valueKey]!==void 0&&r.push(l[e.valueKey]),r),[]).join(",");o("update:modelValue",a);return}o("update:modelValue",t)}});e.modelValue===void 0&&e.defaultModelValue&&(c.value,e.defaultModelValue);const n=E([]),m=t=>{t?fetch(t).then(a=>a.json()).then(a=>{n.value=a}):n.value=[]};e.optionsUrl&&m(e.optionsUrl),O(()=>e.optionsUrl,t=>{o("update:modelValue",void 0),m(t)});const s=t=>N(t.value)?t.value[i.value.valueKey]:t.value,p=S(()=>(n.value.length?n.value:e.options).reduce((a,r)=>{const l=s(r);return!l&&l!==0&&l!==!1||a.push({...r,key:l}),a},[])),u=E(!0);return O(()=>i.value.multiple,()=>{o("update:modelValue",void 0),u.value=!1,_(()=>{u.value=!0})}),{formItemBindProps:k,selectBindProps:i,selectOnEmits:g,selectOptions:p,reshow:u,readonly:h,theModelValue:c}}});function x(e,o,k,i,g,h){const c=y("ElOption"),n=y("ElSelect"),m=y("VkfFormItem");return d(),f(m,W(G(e.formItemBindProps)),{default:V(()=>[e.reshow?(d(),f(n,P({key:0},e.selectBindProps,{modelValue:e.theModelValue,"onUpdate:modelValue":o[0]||(o[0]=s=>e.theModelValue=s),disabled:e.readonly||e.disabled,class:{"is-readonly":e.readonly}},z(e.selectOnEmits)),D({default:V(()=>[(d(!0),H(J,null,B(e.selectOptions,s=>(d(),f(c,P({ref_for:!0},s,{key:s.key}),null,16))),128))]),_:2},[B(e.selectSlots,(s,p)=>({name:p,fn:V(u=>[(d(),f(L(s?.(u))))])}))]),1040,["modelValue","disabled","class"])):Q("",!0),T(e.$slots,"default")]),_:3},16)}const v=q(Z,[["render",x]]);v.install=e=>{e.component(v.name,v)};export{v as V};
