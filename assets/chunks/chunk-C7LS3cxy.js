import{N as R}from"./chunk-Dd5vnLK-.js";import{ao as E,ap as I,p as w,d as b,v as h,O as C,C as V,c as F,aq as T,M as v,q as n,o as O,a as $,w as g,b as f,W as k,m as D,U as P}from"./chunk-Isw0PHqr.js";import{_,g as q}from"./chunk-BYdxU15d.js";import{o as B,q as j}from"./chunk-BvwBNQlH.js";import{V as L,g as N}from"./chunk-D_bg5NQa.js";import{V as A}from"./chunk-BZhRlYD7.js";const H={...E,data:{type:Object,default:()=>({})},formItems:{type:Array,default:()=>[]},readonly:{type:Boolean},elRef:{type:Function,default:()=>R},layout:{type:Boolean,default:!1},rowSource:{type:Object,default:()=>({})},colSource:{type:Object,default:()=>({})}},M={...I,setData:e=>e,validate:null,submit:null},U=e=>24-e.templateSlots.reduce((o,a)=>{if(!a.span)throw new Error("ElColSource span is required");return o+a.span},0),W=(e,o={})=>{const a=e.span??o.span;if(a==null)throw new Error("genColItem ElColSource span is required");return{...o,templateType:"ElCol",span:a,templateSlots:[w(e,{excludes:["span"]})]}},z=(e,o={})=>({...o,templateType:"ElRow",templateSlots:e?[e]:[]}),G=b({name:"VkfForm",components:{ElForm:h,VkfFormItemRenderer:_,VkfTemplatesDefault:L,VkfTemplatesLayout:A},props:H,emits:M,setup(e,{emit:o}){const a=B(e,["model"]),c=j(o),s=C(),d=T();V("vkfFormVm",d),V("elFormRef",s);const l=t=>{s.value=t,e.elRef(t)},m=F(()=>e.layout?e.formItems.reduce((t,r)=>{const u=t[t.length-1],S=r.span??e.colSource.span;if(!S)return t.push(r),t;if(Reflect.has(r,"templateIf")&&!q(r.templateIf)(e.data))return t;const y=W(r,e.colSource);return!u||U(u)<S?t.push(z(y,e.rowSource)):u.templateSlots.push(y),t},[]):e.formItems);return{formProps:a,formEmits:c,getValue:N,getRef:l,computed:F,rendererSource:m,handleSubmit:t=>{t.preventDefault(),o("submit",t)}}}});function J(e,o,a,c,s,d){const l=n("VkfTemplatesDefault"),m=n("VkfTemplatesLayout"),i=n("VkfFormItemRenderer"),t=n("ElForm");return O(),$(t,D(e.formProps,{ref:e.getRef,class:{"is-readonly":e.readonly},model:e.model||e.data},P(e.formEmits),{onSubmit:e.handleSubmit}),{default:g(()=>[f(i,{source:e.rendererSource},{default:g(()=>[f(l,{data:e.data,onSetData:o[0]||(o[0]=r=>e.$emit("setData",r))},null,8,["data"]),f(m,{data:e.data},null,8,["data"]),k(e.$slots,"rendererTemplate")]),_:3},8,["source"]),k(e.$slots,"default")]),_:3},16,["class","model","onSubmit"])}const p=v(G,[["render",J]]);p.install=e=>{e.component(p.name,p)};export{p as V};
