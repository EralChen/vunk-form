import{p as g,V as b,b as P,u as $}from"./chunk-CAS0iGZj.js";import{e as D,g as R}from"./chunk-DyvYxXn8.js";import{d as B,aW as S,H as N,aX as w,c as A,aN as C,W as q,l as r,o as l,a as u,w as n,al as I,b as s,m as M,n as F,y as V,t as W,F as H,R as L,a5 as U,q as X,g as j,u as T}from"./chunk-C7ZeX_9O.js";import{V as z}from"./chunk-DOzYsqnK.js";import{_ as G}from"./chunk-BhnDSM61.js";import{_ as J}from"./chunk-BGN9kIkL.js";import{_ as K}from"./chunk-BnvhJvMU.js";import{V as O}from"./chunk-DgXfRSzT.js";import"./chunk-Jry77yXC.js";import"./chunk-CHVJJ-_P.js";import"./chunk-CyiLY1__.js";import"./chunk-CDRYhmTc.js";import"./chunk-DMfb15X3.js";import"./chunk-bmAyDnwb.js";import"./chunk-BsXGJ1eq.js";import"./chunk-CDsrKX_j.js";import"./chunk-JFdVPp_m.js";import"./chunk-B1Jf328k.js";import"./chunk-Cy87Pzrv.js";import"./chunk-D4EIeiea.js";import"./chunk-D1giD64C.js";import"./chunk-fEI7Cr-O.js";import"./chunk-CI8hUG12.js";import"./chunk-zKPkODU6.js";const Q={...g,formItems:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]},readonly:{type:Boolean,default:void 0},splicable:{type:Boolean,default:!0},inheritTemplates:{type:Boolean,default:!1}},Y={},Z=B({name:"VkfCardInputCollection",components:{VkfFormItem:b,ElCard:S,ElButton:N,ElEmpty:w,VkfTemplateInstancesProvider:G,VkfTemplatesDefault:z,VkfRendererData:K,VkfFormItemRenderer:J},props:Q,emits:Y,setup(e,{emit:t}){const d=P(e),i=$(e),m=A(()=>{if(!e.prop||e.prop.length===0)return e.modelValue;const a={};return D(a,{k:e.prop,v:e.modelValue}),a});function f(a){const o=C(e.modelValue);o.splice(a+1,0,{}),t("update:modelValue",o)}function y(a){const o=C(e.modelValue);o.splice(a,1),t("update:modelValue",o)}const p=()=>{t("update:modelValue",[{},...e.modelValue])},_=a=>{const o=C(m.value);D(o,a),t("update:modelValue",R(o,e.prop))};function v(a){return e.formItems.map(o=>({readonly:i.value,...o,prop:[e.prop??[],a,o.prop].flat()}))}return{formItemBindProps:d,addToFirst:p,readonly:i,handleMinus:y,handlePlus:f,formData:m,handleFormSetData:_,createTheFormItems:v}}}),x={key:0,class:"vkf-card-input-collection-options"},ee={class:"vkf-card-input-collection-card__footer"};function te(e,t,d,i,m,f){const y=r("VkfTemplatesDefault"),p=r("ElButton"),_=r("ElEmpty"),v=r("VkfFormItemRenderer"),a=r("ElCard"),o=r("VkfFormItem"),E=r("VkfRendererData"),h=r("VkfTemplateInstancesProvider");return l(),u(h,{"inherit-templates":e.inheritTemplates},{default:n(()=>[e.inheritTemplates?I("",!0):(l(),u(y,{key:0})),s(E,{data:e.formData,onSetData:e.handleFormSetData},{default:n(()=>[s(o,M(e.formItemBindProps,{class:"vkf-card-input-collection"}),{default:n(()=>[!e.readonly&&e.splicable?(l(),F("div",x,[s(p,{type:"primary",onClick:e.addToFirst},{default:n(()=>t[0]||(t[0]=[V(" 添加 ")])),_:1},8,["onClick"])])):I("",!0),e.modelValue?.length?I("",!0):(l(),u(_,{key:1,class:"vkf-card-input-collection-empty"},{image:n(()=>t[1]||(t[1]=[V(W(""))])),_:1})),(l(!0),F(H,null,L(e.modelValue,(oe,c)=>(l(),u(a,{key:c,class:"vkf-card-input-collection-card",shadow:"hover"},U({default:n(()=>[s(v,{source:e.createTheFormItems(c)},null,8,["source"])]),_:2},[!e.readonly&&e.splicable?{name:"footer",fn:n(()=>[X("div",ee,[s(p,{type:"primary",onClick:()=>e.handlePlus(c)},{default:n(()=>t[2]||(t[2]=[V(" 添加 ")])),_:2},1032,["onClick"]),s(p,{type:"danger",onClick:()=>e.handleMinus(c)},{default:n(()=>t[3]||(t[3]=[V(" 删除 ")])),_:2},1032,["onClick"])])]),key:"0"}:void 0]),1024))),128))]),_:1},16)]),_:1},8,["data","onSetData"])]),_:1},8,["inherit-templates"])}const k=q(Z,[["render",te]]);k.install=e=>{e.component(k.name||"VkfCardInputCollection",k)};const he=B({__name:"basic",setup(e){const t=j([{}]),d=[{templateType:"VkfInput",prop:"question",label:"问题"},{templateType:"VkfInput",prop:"answer",label:"答案"}];return(i,m)=>(l(),u(T(O),null,{default:n(()=>[s(T(k),{modelValue:t.value,"onUpdate:modelValue":m[0]||(m[0]=f=>t.value=f),label:"问答","form-items":d},null,8,["modelValue"])]),_:1}))}});export{he as default};
