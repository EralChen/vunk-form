import{p as b,t as M,v as U,V as w,c as C,w as F,x as I,u as $}from"./chunk-cqKyegso.js";import{d as j,ar as K,as as A,c as E,at as N,r as O,au as S,I as _,y as H,N as R,f as y,o as d,a as f,w as V,m as P,W as z,a2 as D,g as L,F as T,H as B,a3 as W,i as X,X as Y,Y as Z,Z as q}from"./chunk-B7yAMqV2.js";const G={...b,...M,options:{type:Array,default:()=>[]},selectSlots:{type:Object,default:void 0},optionsUrl:{type:String,default:""},defaultModelValue:null,stringify:{type:Boolean,default:!1}},J={...U},Q=j({name:"VkfSelect",components:{VkfFormItem:w,ElSelect:K,ElOption:A},props:G,emits:J,setup(e,{emit:o}){const k=C(e),i=F(e,["disabled","modelValue"]),g=I(o,["update:modelValue"]),h=$(e),c=E({get:()=>e.multiple&&e.stringify&&typeof e.modelValue=="string"?e.modelValue?e.modelValue.split(","):[]:e.modelValue??e.defaultModelValue,set:t=>{if(e.multiple&&e.stringify&&Array.isArray(t)){const a=t.reduce((u,l)=>(typeof l=="string"?u.push(l):N(l)&&l[e.valueKey]!==void 0&&u.push(l[e.valueKey]),u),[]).join(",");o("update:modelValue",a);return}o("update:modelValue",t)}});e.modelValue===void 0&&e.defaultModelValue&&(c.value,e.defaultModelValue);const n=O([]),m=t=>{t?fetch(t).then(a=>a.json()).then(a=>{n.value=a}):n.value=[]};e.optionsUrl&&m(e.optionsUrl),S(()=>e.optionsUrl,t=>{o("update:modelValue",void 0),m(t)});const s=t=>H(t.value)?t.value[i.value.valueKey]:t.value,p=E(()=>(n.value.length?n.value:e.options).reduce((a,u)=>{const l=s(u);return!l&&l!==0&&l!==!1||a.push({...u,key:l}),a},[])),r=O(!0);return S(()=>i.value.multiple,()=>{o("update:modelValue",void 0),r.value=!1,_(()=>{r.value=!0})}),{formItemBindProps:k,selectBindProps:i,selectOnEmits:g,selectOptions:p,reshow:r,readonly:h,theModelValue:c}}});function x(e,o,k,i,g,h){const c=y("ElOption"),n=y("ElSelect"),m=y("VkfFormItem");return d(),f(m,Z(q(e.formItemBindProps)),{default:V(()=>[e.reshow?(d(),f(n,P({key:0},e.selectBindProps,{modelValue:e.theModelValue,"onUpdate:modelValue":o[0]||(o[0]=s=>e.theModelValue=s),disabled:e.readonly||e.disabled,class:{"is-readonly":e.readonly}},z(e.selectOnEmits)),D({default:V(()=>[(d(!0),L(T,null,B(e.selectOptions,s=>(d(),f(c,P({ref_for:!0},s,{key:s.key}),null,16))),128))]),_:2},[B(e.selectSlots,(s,p)=>({name:p,fn:V(r=>[(d(),f(W(s?.(r))))])}))]),1040,["modelValue","disabled","class"])):X("",!0),Y(e.$slots,"default")]),_:3},16)}const v=R(Q,[["render",x]]);v.install=e=>{e.component(v.name,v)};export{v as V};
